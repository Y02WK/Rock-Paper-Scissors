<!DOCTYPE html>
<html>
    <title>Rock Paper Scissors in your console</title>
    <body>
        <script>
            function computerPlay() {   /*Choice generation for computer*/
                const choiceList = ["Rock", "Paper", "Scissors"];
                let computerChoice = choiceList[Math.floor(Math.random() * choiceList.length)];
                return computerChoice;
            }

            function capitalize(a) {    /*String standardization for player entry*/
              a = a.toLowerCase();
              a = a[0].toUpperCase() + a.slice(1,);
              return a;
          }

            function playARound(playerSelection, computerSelection) {    /*Game of RPS utilising previous function for player inputs*/
                playerSelection = capitalize(playerSelection);
                if (playerSelection == computerSelection) {
                    return("Draw!")
                } else if ((playerSelection == "Rock" & computerSelection == "Paper") | (playerSelection == "Scissors" & computerSelection == "Rock") | (playerSelection == "Paper" & computerSelection == "Scissors")){
                    return("You lose! " + computerSelection + " beats " + playerSelection)
                } else {
                    return("You win! " + playerSelection + " beats " + computerSelection)
                }
            }
            
            function playerInput() {    /*Function for player input of their selection, with checking function to ensure that only Rock | Paper | Scissors is entered into prompt*/ 
                let playerPrompt = capitalize(prompt("Please input your selection. Rock , Paper or Scissors only"));
                while (playerPrompt != "Rock"&& playerPrompt !=  "Paper" && playerPrompt != "Scissors") {
                    playerPrompt = capitalize(prompt("Please only input Rock, Paper or Scissors."))
                }
                return capitalize(playerPrompt);
            }

            function game() {       /*Runs the game with score check for 5 games*/
                let gameCount = 0;
                let playerWin = 0;
                let computerWin = 0;
                while (gameCount < 5) {
                    let playerSelection = playerInput(); 
                    let computerSelection = computerPlay();
                    playARound(playerInput, computerSelection)
                    if (playARound(playerSelection, computerSelection).includes("win")) {
                        playerWin += 1;
                    } else if (playARound(playerSelection, computerSelection).includes("lose")) {
                        computerWin += 1;
                    }
                    console.log(playRound(playerSelection, computerSelection))
                    gameCount += 1;
                }
                if (playerWin == computerWin) {
                    console.log("This game is a tie! Both players won " + playerWin + " rounds.")
                } else if (playerWin > computerWin) {
                    console.log("You win! Beating the computer with " + playerWin + " rounds to " + computerWin + " rounds.")
                } else {
                    console.log(console.log("You Lose! The computer beat you with " + computerWin + " rounds to " + playerWin + " rounds."))
                }
            }
            console.log(game())
        </script>
    </body>

</html>
